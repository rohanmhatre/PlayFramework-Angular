"use strict";angular.module("phonebookApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngGrid","ui.bootstrap","angular-loading-bar"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("phonebookApp").controller("MainCtrl",["$scope","$modal","ContactAPI",function(a,b,c){a.contactSelectd=void 0,c.get().success(function(b){a.contactsData=b}),a.columnDefs=[{field:"name",displayName:"Name",width:"auto",minWidth:300},{field:"phone",displayName:"Phone",width:"auto",minWidth:100},{field:"email",displayName:"E-mail",width:"auto",minWidth:150},{displayName:"Actions",cellTemplate:"views/partials/gridActions.html",width:"*"}],a.$watch("search",function(b){a.gridOptions.filterOptions.filterText=b}),a.gridOptions={data:"contactsData",columnDefs:"columnDefs",multiSelect:!1,showColumnMenu:!0,enableRowSelection:!0,filterOptions:{filterText:"",useExternalFilter:!1}},a.create=function(){var b={};angular.copy(a.contact,b),c.create(b).success(function(b){a.contactsData.push(b),a.cleanForm()})},a.update=function(){c.update(a.contactSelectd.id,a.contact).success(function(b){angular.copy(b,a.contactSelectd),a.cleanForm()})},a.cleanForm=function(){a.contact={},a.contactSelectd=void 0,a.form.$setPristine()},a.gridEdit=function(b){a.cleanForm(),angular.copy(b.entity,a.contact),a.contactSelectd=b.entity},a.gridRemove=function(d){var e=function(a,b,d,e){a.contact=d,a.contactsData=e,a.removeOk=function(){c.delete(a.contact.id).success(function(){a.contactsData.splice(a.contactsData.indexOf(a.contact),1)}),b.close()},a.removeCancel=function(){b.dismiss("cancel")}};e.$inject=["$scope","$modalInstance","contact","contactsData"],a.cleanForm(),b.open({templateUrl:"views/partials/removeModal.html",controller:e,resolve:{contactsData:function(){return a.contactsData},contact:function(){return d.entity}}})}}]),angular.module("phonebookApp").factory("ContactAPI",["$http",function(a){function b(a){return a.always=function(b){a.then(b,b)},a}var c="http://ccplayangular.herokuapp.com/contact";return{get:function(d){var e=c;void 0!==d&&(e=e+"/"+d);var f=a.get(e);return b(f)},create:function(d){var e=a.post(c,d);return b(e)},update:function(d,e){var f=c+"/"+d,g=a.put(f,e);return b(g)},"delete":function(d){var e=c+"/"+d,f=a.delete(e);return b(f)}}}]);